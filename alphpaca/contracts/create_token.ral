Contract CreateToken(
    token: ByteVec, //* PACA ID
    owner: Address, //* PACA ID
    mut alphfee: U256,
    mut pacafee: U256,
    contract: ByteVec
) {

    event Destroy(user: Address)

    enum ErrorCodes {
        InvalidCaller = 1
    }

    pub fn getTokenId() -> ByteVec {
        return token
    }

    @using(assetsInContract = false, updateFields = true, checkExternalCaller = true)
    pub fn changeAlph(fee: U256) -> () {

        let caller = callerAddress!()

        checkCaller!(owner == caller, ErrorCodes.InvalidCaller)

        pacafee = fee

    }

    @using(assetsInContract = false, updateFields = true, checkExternalCaller = true)
    pub fn changePaca(fee: U256) -> () {

        let caller = callerAddress!()

        checkCaller!(owner == caller, ErrorCodes.InvalidCaller)

        alphfee = fee

    }

    @using(preapprovedAssets = true, assetsInContract = false, updateFields = false, checkExternalCaller = false)
    pub fn createToken(symbol: ByteVec, name: ByteVec, decimals: U256, tokenTotal: U256) -> (ByteVec) {

        let minter = callerAddress!()

        let fee = alphfee

        let (encodeImmutableFields, encodeMutableFields) = Token.encodeFields!(symbol, name, decimals, tokenTotal, minter)

        let contractID = copyCreateContractWithToken!{minter -> ALPH: 1 alph}(
            contract,                                                                                  
            encodeImmutableFields,
            encodeMutableFields,
            tokenTotal,
            minter
        )
        
        transferToken!(minter, owner, ALPH, fee) //* FEE w/ ALPH

        return contractID
    }

    @using(preapprovedAssets = true, assetsInContract = false, updateFields = false, checkExternalCaller = false)
    pub fn createTokenWithPaca(symbol: ByteVec, name: ByteVec, decimals: U256, tokenTotal: U256) -> (ByteVec) {

        let minter = callerAddress!()

        let fee = pacafee

        let (encodeImmutableFields, encodeMutableFields) = Token.encodeFields!(symbol, name, decimals, tokenTotal, minter)

        let contractID = copyCreateContractWithToken!{minter -> ALPH: 1 alph}(
            contract,                                                                                  
            encodeImmutableFields,
            encodeMutableFields,
            tokenTotal,
            minter
        )

        transferToken!(minter, owner, getTokenId(), fee) //* FEE w/ PACA

        return contractID
    }

    @using(assetsInContract = true, updateFields = false, checkExternalCaller = true)
    pub fn destroy() -> () {

        let caller = callerAddress!()

        checkCaller!(owner == caller, ErrorCodes.InvalidCaller)

        destroySelf!(owner)

        emit Destroy(owner)
    }
}